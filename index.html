<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
<title>VigoChat</title>

<style>
:root{
  --bg:#f1efe9;
  --card:#ffffff;
  --text:#1b1b1b;
  --muted:#777;
  --accent:#2b6cff;
  --border:#e4e4e4;
}

body.dark{
  --bg:#121212;
  --card:#1e1e1e;
  --text:#ffffff;
  --muted:#aaa;
  --border:#333;
}

*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:system-ui;
  background:var(--bg);
  color:var(--text);
}

header{
  padding:16px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

header h1{
  font-size:18px;
}

button{
  cursor:pointer;
}

.view{
  display:none;
  padding:16px;
}

.view.active{
  display:block;
}

.card{
  background:var(--card);
  padding:16px;
  border-radius:14px;
  margin-bottom:14px;
  border:1px solid var(--border);
}

.bottom-nav{
  position:fixed;
  bottom:0;
  left:0;
  right:0;
  background:var(--card);
  border-top:1px solid var(--border);
  display:flex;
}

.tab{
  flex:1;
  padding:14px;
  text-align:center;
  font-size:13px;
  color:var(--muted);
}

.tab.active{
  color:var(--accent);
  font-weight:600;
}
</style>
</head>

<body>

<header>
  <h1 id="title">VigoChat</h1>
  <button id="themeBtn">ðŸŒ™</button>
</header>

<!-- AUTH -->
<section class="view active" id="view-auth">
  <div class="card">
    <h2>GiriÅŸ / KayÄ±t</h2><br>
    <input id="email" placeholder="E-posta" style="width:100%;padding:10px;margin-bottom:10px">
    <input id="pass" type="password" placeholder="Åžifre" style="width:100%;padding:10px;margin-bottom:10px">
    <button id="loginBtn" style="width:100%;padding:10px;margin-bottom:10px">GiriÅŸ Yap</button>
    <button id="signupBtn" style="width:100%;padding:10px">KayÄ±t Ol</button>
    <p id="authErr" style="color:red;margin-top:10px"></p>
  </div>
</section>

<!-- CHATS -->
<section class="view" id="view-chats">
  <div class="card">
    <h2>Sohbetler</h2>
    <div id="chatList"></div>
  </div>
</section>

<!-- STATUS -->
<section class="view" id="view-status">
  <div class="card">
    <h2>Durum</h2>
    <p>Durum sistemi eklenecek</p>
  </div>
</section>

<!-- CALLS -->
<section class="view" id="view-calls">
  <div class="card">
    <h2>Aramalar</h2>
    <p>Arama geÃ§miÅŸi burada olacak</p>
  </div>
</section>

<!-- PROFILE -->
<section class="view" id="view-profile">
  <div class="card">
    <h2>Profil</h2>
    <p id="profileEmail"></p>
    <button id="logoutBtn">Ã‡Ä±kÄ±ÅŸ Yap</button>
  </div>
</section>

<nav class="bottom-nav">
  <div class="tab active" data-tab="chats">Sohbet</div>
  <div class="tab" data-tab="status">Durum</div>
  <div class="tab" data-tab="calls">Arama</div>
  <div class="tab" data-tab="profile">Profil</div>
</nav>

<script>
const $ = s => document.querySelector(s);
const $$ = s => document.querySelectorAll(s);

const state = {
  user:null
};

function setView(name){
  $$(".view").forEach(v=>v.classList.remove("active"));
  $("#view-"+name).classList.add("active");
  $$(".tab").forEach(t=>t.classList.remove("active"));
  document.querySelector(`[data-tab="${name}"]`)?.classList.add("active");
}

$$(".tab").forEach(tab=>{
  tab.onclick=()=>setView(tab.dataset.tab);
});

$("#themeBtn").onclick=()=>{
  document.body.classList.toggle("dark");
  localStorage.setItem("theme",
    document.body.classList.contains("dark")?"dark":"light");
};

if(localStorage.getItem("theme")==="dark"){
  document.body.classList.add("dark");
}
</script>

</body>
</html>
/* =========================
   FIREBASE CONFIG
========================= */

const firebaseConfig = {
  apiKey: "BURAYA_KENDI_APIKEY",
  authDomain: "BURAYA_AUTHDOMAIN",
  projectId: "BURAYA_PROJECTID",
  storageBucket: "BURAYA_STORAGE",
  messagingSenderId: "BURAYA_SENDERID",
  appId: "BURAYA_APPID"
};

/* =========================
   FIREBASE LOAD
========================= */

function loadFirebase(){
  return new Promise(resolve=>{
    const appScript = document.createElement("script");
    appScript.src="https://www.gstatic.com/firebasejs/10.12.5/firebase-app-compat.js";
    document.body.appendChild(appScript);

    appScript.onload=()=>{
      const authScript=document.createElement("script");
      authScript.src="https://www.gstatic.com/firebasejs/10.12.5/firebase-auth-compat.js";
      document.body.appendChild(authScript);

      authScript.onload=()=>{
        const dbScript=document.createElement("script");
        dbScript.src="https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore-compat.js";
        document.body.appendChild(dbScript);

        dbScript.onload=()=>resolve();
      };
    };
  });
}

let auth;
let db;

async function initFirebase(){
  await loadFirebase();

  firebase.initializeApp(firebaseConfig);

  auth = firebase.auth();
  db = firebase.firestore();

  auth.onAuthStateChanged(user=>{
    if(user){
      state.user=user;
      $("#profileEmail").textContent=user.email;
      setView("chats");
    }else{
      state.user=null;
      setView("auth");
    }
  });
}

/* =========================
   AUTH FUNCTIONS
========================= */

$("#loginBtn").onclick=async ()=>{
  $("#authErr").textContent="";
  try{
    await auth.signInWithEmailAndPassword(
      $("#email").value,
      $("#pass").value
    );
  }catch(e){
    $("#authErr").textContent=e.message;
  }
};

$("#signupBtn").onclick=async ()=>{
  $("#authErr").textContent="";
  try{
    await auth.createUserWithEmailAndPassword(
      $("#email").value,
      $("#pass").value
    );
  }catch(e){
    $("#authErr").textContent=e.message;
  }
};

$("#logoutBtn").onclick=()=>{
  auth.signOut();
};

initFirebase();
